<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Registro de horas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- LOGIN VIEW -->
  <div id="loginView" class="login-wrapper">
    <div class="login-box">
      <h1>Acceso</h1>
      <p>Introduce la contrase침a para acceder.</p>

      <div class="input-group">
        <input id="passwordInput" type="password" placeholder="Contrase침a" autocomplete="current-password" />
        <button id="togglePasswordBtn" type="button" class="btn btn-secondary" title="Mostrar/Ocultar contrase침a">游녜</button>
      </div>

      <label class="remember-row">
        <input type="checkbox" id="rememberPassword" />
        Recordar
      </label>

      <button id="loginBtn" class="btn btn-primary" type="button">Entrar</button>
      <div id="loginMessage" class="login-message"></div>

      <div class="login-footer">
        <small>춸 Registro de horas</small>
      </div>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="protectedContent" class="hidden">
    <header class="app-header">
      <img src="images/monologo.png" alt="Logo" class="app-logo" />
      <h1 class="app-title">Registro de horas</h1>
      <button id="logoutBtn" class="btn btn-secondary">Salir</button>
    </header>

    <nav class="tabs">
      <button class="tab-btn active" data-tab="tab-register">Registrar horas</button>
      <button class="tab-btn" data-tab="tab-all">Ver todos los proyectos</button>
      <button class="tab-btn" data-tab="tab-manage">Gestionar proyectos</button>
      <button class="tab-btn" data-tab="tab-work-division">Divisi칩n de trabajo</button>
    </nav>

    <main class="tabs-content">

      <!-- TAB: Registrar horas -->
      <section id="tab-register" class="tab-panel active">
        <h2>Registrar horas</h2>

        <div class="form-grid">

          <div class="field">
            <label>Semana</label>
            <input type="week" id="weekInput" />
            <small class="hint">Selecciona primero la semana.</small>
          </div>

          <div class="field">
            <label>Empresa/Proyecto prin.</label>
            <select id="companySelect"></select>
          </div>

          <div class="field">
            <label>Proyecto</label>
            <select id="projectSelect"></select>
          </div>

          <div class="field">
            <label>Trabajador</label>
            <select id="workerSelect"></select>
          </div>

          <div class="field">
            <label>Horas</label>
            <input type="number" id="hoursInput" min="0" step="0.25" placeholder="Ej: 2.5" />
          </div>

          <div class="field">
            <label>Descripci칩n</label>
            <input type="text" id="descInput" placeholder="Opcional" />
          </div>

        </div>

        <div class="actions-row">
          <button id="addEntryBtn" class="btn btn-primary">A침adir</button>
          <button id="saveAllBtn" class="btn btn-secondary">Guardar en servidor</button>
        </div>

        <div class="table-wrapper">
          <table class="data-table" id="entriesTable">
            <thead>
              <tr>
                <th>Semana</th>
                <th>Empresa</th>
                <th>Proyecto</th>
                <th>Trabajador</th>
                <th>Horas</th>
                <th>Descripci칩n</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="registerStatus" class="status"></div>
      </section>

      <!-- TAB: Ver todos los proyectos -->
      <section id="tab-all" class="tab-panel">
        <h2>Ver todos los proyectos</h2>

        <div class="filters-row">
          <div class="field">
            <label>Mes</label>
            <input type="month" id="monthFilterAll" />
          </div>

          <div class="field">
            <label>Empresa</label>
            <select id="companyFilterAll"></select>
          </div>

          <div class="field">
            <label>Proyecto</label>
            <select id="projectFilterAll"></select>
          </div>

          <div class="field">
            <label>Trabajador</label>
            <select id="workerFilterAll"></select>
          </div>

          <div class="field">
            <label>&nbsp;</label>
            <button id="applyFiltersBtn" class="btn btn-primary">Aplicar filtros</button>
          </div>
        </div>

        <div class="table-wrapper">
          <table class="data-table" id="allTable">
            <thead>
              <tr>
                <th>Semana</th>
                <th>Empresa</th>
                <th>Proyecto</th>
                <th>Trabajador</th>
                <th>Horas</th>
                <th>Descripci칩n</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="allStatus" class="status"></div>
      </section>

      <!-- TAB: Gestionar proyectos -->
      <section id="tab-manage" class="tab-panel">
        <h2>Gestionar proyectos</h2>

        <div class="manage-top-row">
          <div class="field">
            <label>Mes</label>
            <input type="month" id="manageMonthInput" />
          </div>

          <div class="field">
            <label>Empresa/Proyecto prin.</label>
            <select id="manageCompanySelect"></select>
          </div>

          <div class="field">
            <label>Nuevo proyecto</label>
            <input type="text" id="newProjectNameInput" placeholder="Nombre del proyecto" />
          </div>

          <div class="field">
            <label>&nbsp;</label>
            <button id="addProjectBtn" class="btn btn-primary">A침adir proyecto</button>
          </div>
        </div>

        <div class="table-wrapper">
          <table class="data-table" id="manageProjectsTable">
            <thead>
              <tr>
                <th>Mes</th>
                <th>Empresa</th>
                <th>Proyecto</th>
                <th>Trabajadores asignados</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="manageStatus" class="status"></div>
      </section>

      <!-- TAB: Divisi칩n de trabajo -->
      <section id="tab-work-division" class="tab-panel">
        <h2>Divisi칩n de trabajo</h2>

        <div class="wd-top">
          <div class="field">
            <label>Fecha</label>
            <input type="date" id="wdDate" />
          </div>
          <div class="field">
            <label>Veh칤culo</label>
            <select id="wdVehicle"></select>
          </div>
          <div class="field">
            <label>Trabajador</label>
            <select id="wdWorker"></select>
          </div>
          <div class="field">
            <label>Horas</label>
            <input type="number" id="wdHours" min="0" step="0.25" placeholder="Ej: 7.5" />
          </div>
          <div class="field">
            <label>Tarea</label>
            <input type="text" id="wdTask" placeholder="Opcional" />
          </div>

          <div class="field">
            <label>&nbsp;</label>
            <button id="wdAddBtn" class="btn btn-primary">A침adir</button>
          </div>

          <div class="field">
            <label>&nbsp;</label>
            <button id="wdSaveVehiclesBtn" class="btn btn-secondary">Guardar veh칤culos</button>
          </div>
        </div>

        <div class="wd-vehicles">
          <h3>Veh칤culos</h3>
          <div class="vehicles-row">
            <input type="text" id="newVehicleInput" placeholder="Nuevo veh칤culo (ej. Furgoneta 1)" />
            <button id="addVehicleBtn" class="btn btn-secondary">A침adir veh칤culo</button>
          </div>
          <div id="vehiclesList" class="chips"></div>
        </div>

        <div class="table-wrapper">
          <table class="data-table" id="wdTable">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Veh칤culo</th>
                <th>Trabajador</th>
                <th>Horas</th>
                <th>Tarea</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div id="wdStatus" class="status"></div>
      </section>

    </main>

    <footer class="app-footer">
      <small>Registro de horas</small>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
